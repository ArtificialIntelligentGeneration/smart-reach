### Независимые ТЗ (можно делать параллельно)

#### 1) Рассылка по своим чатам (ChatPicker)
- Цель: выбрать чаты аккаунта и подставить их `username/chat_id` в получатели.
- Объём: кнопка «Чаты» у каждого аккаунта; диалог со списком `get_dialogs()` (group/supergroup/channel), поиск, мультивыбор; кэш на сессию; нормализация адресатов (`@name`/`-100…`).
- UX: «Рассылка» → «Чаты» → чекбоксы → «OK» → получатели заполняются.
- DoD: отправка в выбранные чаты работает для `username` и `chat_id`; пустые/недоступные — помечены в логах.
- Артефакты: код + краткая инструкция в README.

#### 2) Шаблоны: плейсхолдеры + Spintax
- Цель: повысить вариативность сообщений без изменения скрипта.
- Объём: поддержка `{{first_name}}`, `{{last_name}}`, `{{account_name}}`; spintax `{вариант1|вариант2}`; предпросмотр.
- UX: «Скрипты» — подсказка синтаксиса; «Предпросмотр».
- DoD: корректная подстановка без крашей; не ломает Markdown; предпросмотр совпадает с отправленным.
- Артефакты: парсер, тесты, README блок «Шаблоны».

#### 3) Импорт/Экспорт профиля
- Цель: перенос настроек между машинами.
- Объём: экспорт zip (accounts.json без паролей, scripts/, settings.ini, темы, шаблоны), импорт с валидацией; конфликт имён — диалог.
- UX: «О программе» → «Экспорт/Импорт».
- DoD: архив импортируется без потери данных; не перезаписывает сессии `.session`.
- Артефакты: код + предупреждение про безопасность.

#### 4) i18n RU/EN
- Цель: двуязычный интерфейс.
- Объём: вынос строк в ресурсы; переключатель языка; автодетект ОС.
- UX: «Настройки» → «Язык: RU/EN».
- DoD: все пользовательские тексты локализованы; переключение без перезапуска или с понятным подсказом.
- Артефакты: файлы локалей, таблица ключей.

#### 5) Медиа-оптимизация
- Цель: меньше ошибок по лимитам Telegram и быстрее отправка.
- Объём: опции: авто-ресайз фото до 1280px, компрессия JPEG (качество 80), предупреждение >10MB фото и >2GB документов; предпросмотр веса.
- UX: «Рассылка» → «Медиа» → чекбоксы «Оптимизировать».
- DoD: вес снижается, формат не ломается, отправка проходит; лог фиксирует оптимизацию.
- Артефакты: модуль оптимизации, README.

#### 6) Dry‑Run и предпроверка получателей
- Цель: безопасная проверка перед реальной рассылкой.
- Объём: режим «Dry‑Run» (только в логах без отправки); предпроверка: резолв получателей, доступ на запись, сводка «OK/нельзя».
- UX: «Рассылка» → чекбокс «Пробный запуск (без отправки)» → отчёт.
- DoD: корректная сводка; dry‑run не отправляет сообщение ни при каких условиях.
- Артефакты: код + раздел «Проверка перед стартом».

#### 7) Проверка обновлений (manual)
- Цель: уведомлять о новой версии без авто‑обновления.
- Объём: кнопка «Проверить обновления», чтение JSON манифеста (`version`, ссылки), сравнение семвер.
- UX: «О программе» → «Проверить обновления» → диалог с ссылкой.
- DoD: корректно определяет «новая/актуальная»; не делает сетевые вызовы в фоне.
- Артефакты: пример манифеста, README.

#### 8) Сборка и релизные артефакты Desktop
- Цель: унифицировать сборки Win/macOS.
- Объём: обновлённые `.spec` для PyInstaller, ресурсы, версии, скрипт сборки; артефакты: .exe/.app + README.install.
- UX: без изменений.
- DoD: воспроизводимая сборка на CI; запуск на чистой системе; версия в «О программе».
- Артефакты: скрипты сборки, инструкции.

### Зависимости и параллельность
- Все 8 пунктов независимы от тестирования антиспама/биллинга и могут идти параллельно (разные исполнители).
- Пересечения: 2) затрагивает «Скрипты», 5) «Медиа», 6) «Рассылка», 1) «Рассылка/Аккаунты».

### Приёмка (общая)
- Линтер/типизация без ошибок.
- Юнит‑тесты для логики парсинга/нормализации.
- Краткий README‑раздел по каждой функции.
- Скриншоты UI там, где уместно.

Если нужно, расставлю оценки и назначу исполнителей по каждому пункту.

### Роли, оценки и приоритеты

| # | Задача                                  | Роль исполнителя            | Оценка (ч/д) | Приоритет |
|---|-----------------------------------------|-----------------------------|--------------|-----------|
| 1 | ChatPicker (чаты аккаунта)              | Core Desktop (PyQt/Pyrogram)| 2–3 д        | P1        |
| 2 | Шаблоны (placeholders + Spintax)        | Core Desktop                | 2 д          | P2        |
| 3 | Импорт/Экспорт профиля                  | Core Desktop                | 2 д          | P3        |
| 4 | i18n RU/EN                              | Core Desktop                | 1–1.5 д      | P3        |
| 5 | Медиа-оптимизация                       | Core Desktop                | 2–3 д        | P2        |
| 6 | Dry‑Run и предпроверка                   | Core Desktop                | 1.5–2 д      | P1        |
| 7 | Проверка обновлений (manual)            | Core Desktop                | 1 д          | P4        |
| 8 | Сборка и релизные артефакты             | Security & Build + DevOps   | 2 д          | P2        |

Зависимости по людям и календарю:
- 1 и 6 желательно параллелить разными разработчиками Core.
- 8 (сборка) можно запускать сразу после 1–2 фич, не дожидаясь всех.
- 2 (Spintax) и 5 (медиа) — параллельны, но требуют короткого code review UI.

Критерии завершения блока независимых задач:
- Все задачи с приоритетом P1/P2 смержены в main, пройдены smoke‑тесты.
- Обновлён README с разделами по новым функциям.
- Нет регресса в «Рассылка»/«Скрипты»/«Медиа» (ручной чек по чек‑листу QA).

---

