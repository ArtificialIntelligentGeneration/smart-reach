–ß–ï–ö-–õ–ò–°–¢ –†–£–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø ‚Äî –≠—Ç–∞–ø 4: –ê–Ω—Ç–∏—Å–ø–∞–º –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ (Stage)

–î–∞—Ç–∞: __________  –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: __________  –í–µ—Ä—Å–∏—è Desktop: v2.0 + AntiSpam v1.0
–û–∫—Ä—É–∂–µ–Ω–∏–µ: Stage (–≤–∫–ª—é—á—ë–Ω Redis, –¥–æ—Å—Ç—É–ø–µ–Ω Licensing API, JWKS –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω)

1) –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- settings.ini ‚Äî —Ä–∞–∑–¥–µ–ª [antispam] (–ø—Ä–∏–º–µ—Ä):
  peerflood_pause_minutes=30
  peerflood_max_pause_hours=24
  spambot_auto_start=false
  spambot_delay_seconds=10
  spambot_max_tries=3
  floodwait_adaptive=true
  floodwait_base_seconds=60
  floodwait_max_multiplier=5
  floodwait_max_pause_seconds=1800

- settings.ini ‚Äî —Ä–∞–∑–¥–µ–ª [api] (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ stage):
  base_url=https://<stage-api>
  timeout_seconds=10
  allow_offline=false

- –ê–∫–∫–∞—É–Ω—Ç—ã Telegram: –º–∏–Ω–∏–º—É–º 3 —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
  ‚Ä¢ –ê–∫–∫–∞—É–Ω—Ç A ‚Äî —Å –∏—Å—Ç–æ—Ä–∏–µ–π PeerFlood
  ‚Ä¢ –ê–∫–∫–∞—É–Ω—Ç B ‚Äî –ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç FloodWait
  ‚Ä¢ –ê–∫–∫–∞—É–Ω—Ç C ‚Äî ¬´—á–∏—Å—Ç—ã–π¬ª, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å @SpamBot: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start

2) –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
A. PeerFlood (–ø–∞—É–∑–∞ per-account, 30 –º–∏–Ω)
  1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É ‚â•50 —Å–æ–æ–±—â–µ–Ω–∏–π –æ–¥–Ω–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º (A).
  2. –°–ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞—Ç—å PeerFlood (–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —á–∞—Ç—ã).
  3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞: "‚ùå PEER_FLOOD ‚Äî –ø–∞—É–∑–∞ 30 –º–∏–Ω".
  4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ A –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 30 –º–∏–Ω, –¥—Ä—É–≥–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç.
  5. –ü–æ—Å–ª–µ –ø–∞—É–∑—ã A –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞.
  –û–∂–∏–¥–∞–µ–º–æ: –ø–∞—É–∑–∞ —Ä–æ–≤–Ω–æ 30 –º–∏–Ω (¬±5 —Å–µ–∫), –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ.

B. @SpamBot (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫: –≤—ã–∫–ª ‚Üí –≤–∫–ª)
  1. spambot_auto_start=false: —Å–ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞—Ç—å PeerFlood –Ω–∞ A.
     –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ @SpamBot –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–∞–π–º–µ—Ä –ø–∞—É–∑—ã.
  2. –í–∫–ª—é—á–∏—Ç—å spambot_auto_start=true. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å PeerFlood.
     –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –ª–æ–≥–∞—Ö:
     - "ü§ñ @SpamBot –∑–∞–ø—É—â–µ–Ω...", "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ /start (–ø–æ–ø—ã—Ç–∫–∞ N)", "–û—Ç–≤–µ—Ç @SpamBot: ...".
     - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: "‚úÖ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–Ω—è—Ç—ã" ‚Üí –ø–∞—É–∑–∞ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è/—Å–Ω–∏–º–∞–µ—Ç—Å—è.
     - –ü—Ä–∏ –Ω–µ—É—Å–ø–µ—Ö–µ: –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –ø–∞—É–∑—ã.

C. FloodWait (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—É–∑—ã)
  1. –ù–∞ –∞–∫–∫–∞—É–Ω—Ç–µ B –≤—ã–∑–≤–∞—Ç—å FloodWait 60s.
  2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥: "–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–∞—É–∑–∞ 60s x1.0 = 60s".
  3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å 2‚Äì3 —Ä–∞–∑–∞: –æ–∂–∏–¥–∞—Ç—å —Ä–æ—Å—Ç √ó2 ‚Üí √ó4 (–º–∞–∫—Å √ó5), –Ω–æ –Ω–µ > 1800s.
  4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ √ó1.

D. –ú–Ω–æ–≥–æ–∞–∫–∫–∞—É–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º (A, B, C)
  - A –≤ –ø–∞—É–∑–µ (PeerFlood), B –≤ FloodWait (–∂–¥—ë—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç), C —à–ª—ë—Ç –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
  - –ù–µ—Ç –¥–µ–¥–ª–æ–∫–æ–≤, –∫–∞–∂–¥—ã–π –∞–∫–∫–∞—É–Ω—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º, –ª–æ–≥–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ –∏–º–µ–Ω–∞–º –∞–∫–∫–∞—É–Ω—Ç–æ–≤.

E. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (resume)
  1. –í–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
  2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å ‚Üí –ø–æ—è–≤–∏—Ç—Å—è –¥–∏–∞–ª–æ–≥ resume: "–ù–∞–π–¥–µ–Ω–∞ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ (X –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)".
  3. –í—ã–±—Ä–∞—Ç—å "–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å":
     - –ü–∞—É–∑–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ –∏—Å—Ç–µ–∫–ª–∞), –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
  4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å auto-cleanup state-—Ñ–∞–π–ª–æ–≤ —Å—Ç–∞—Ä—à–µ 24 —á (—Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª ‚Üí –æ–Ω —É–¥–∞–ª—ë–Ω).

F. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–æ—Ç–∞–º–∏ (Licensing API)
  1. –°—Ç–∞—Ä—Ç —Å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–≤–æ—Ç—ã (–¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è N —Å–æ–æ–±—â–µ–Ω–∏–π).
  2. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏: –ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç "üìä –ò—Ç–æ–≥: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ X –∏–∑ Y; commit —Ä–µ–∑–µ—Ä–≤–∞ ... OK".
  3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ used == —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º—É sent_ok. –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ/0 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö ‚Äî rollback.

G. UI –∏ –ª–æ–≥–∏
  - –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑–¥–µ–ª–∞ "–ê–Ω—Ç–∏—Å–ø–∞–º" —Ä–∞–±–æ—Ç–∞—é—Ç, –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏.
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (–º–∏–Ω/–º–∞–∫—Å, —Ü–µ–ª—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
  - –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:
    ‚Ä¢ –ü–∞—É–∑—ã: "‚è∏Ô∏è –ü—Ä–æ–ø—É—Å–∫ (–ø–∞—É–∑–∞: ...)"
    ‚Ä¢ @SpamBot: "ü§ñ ..."
    ‚Ä¢ –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: "üîÑ ..."
    ‚Ä¢ –û—à–∏–±–∫–∏ –±–µ–∑ PII (–Ω–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, —Ç–æ–∫–µ–Ω–æ–≤; —Ç–æ–ª—å–∫–æ –∏–º—è –∞–∫–∫–∞—É–Ω—Ç–∞).

3) –ú–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—Ä–∞—Ç—å –≤ –æ—Ç—á—ë—Ç
- –î–æ–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π = (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ / –≤—Å–µ–≥–æ) √ó 100%
- –°—Ä–µ–¥–Ω—è—è –ø–∞—É–∑–∞ (—Å–µ–∫) –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ (—Å–µ–∫)
- –ß–∏—Å–ª–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (–∫–æ–≥–¥–∞ –ø–∞—É–∑–∞ –±—ã–ª–∞ –Ω–µ –Ω—É–∂–Ω–∞)
- –í—Ä–µ–º—è –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫) –æ—Ç –∫–æ–Ω—Ü–∞ –ø–∞—É–∑—ã –¥–æ –ø–µ—Ä–≤–æ–π —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω—Ç–∏—Å–ø–∞–º–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ —Ç–µ—Å—Ç–µ

–§–æ—Ä–º–∞—Ç JSON-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –æ—Ç—á—ë—Ç—É (–ø—Ä–∏–º–µ—Ä):
{
  "session_id": "uuid",
  "total_messages": 150,
  "successful_messages": 142,
  "success_rate": 94.7,
  "total_pauses": 3,
  "avg_pause_seconds": 1800,
  "max_pause_seconds": 3600,
  "false_positives": 0,
  "resume_time_seconds": 45,
  "antispam_settings": {
    "peerflood_pause_minutes": 30,
    "spambot_auto_start": true,
    "floodwait_adaptive": true
  }
}

4) –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–∏—Ç—å
- –õ–æ–≥ —Å–µ—Å—Å–∏–∏ (10‚Äì20 —Å—Ç—Ä–æ–∫) —Å —Ü–µ–ø–æ—á–∫–æ–π: PeerFlood ‚Üí –ø–∞—É–∑–∞ ‚Üí (–æ–ø—Ü.) @SpamBot ‚Üí –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–Ω—Ç–∏—Å–ø–∞–º–∞ –≤ UI
- –°–∫—Ä–∏–Ω—à–æ—Ç –¥–∏–∞–ª–æ–≥–∞ resume –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- JSON-—Ñ–∞–π–ª —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ)
- –ü—Ä–∏ –±–∞–≥–∞—Ö: —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –æ—à–∏–±–æ–∫, –ø–æ–ª–Ω—ã–π –ª–æ–≥, –ø–æ—à–∞–≥–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

5) –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ—Ç–º–µ—Ç–∏—Ç—å –≥–∞–ª–æ—á–∫–∞–º–∏)
Safety caps:
[ ] FloodWait –ø–∞—É–∑–∞ ‚â§ 1800 —Å–µ–∫ (30 –º–∏–Ω)
[ ] PeerFlood –ø–∞—É–∑–∞ ‚â§ 86400 —Å–µ–∫ (24 —á)
[ ] –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è

Thread safety:
[ ] –ù–µ—Ç –¥–µ–¥–ª–æ–∫–æ–≤/–∑–∞–≤–∏—Å–∞–Ω–∏–π
[ ] client_locks –Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–≤–µ—Ä—Ö –Ω—É–∂–Ω–æ–≥–æ
[ ] –ü–æ—Ç–æ–∫–∏ @SpamBot –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
[ ] –õ–æ–≥–∏ –±–µ–∑ PII (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, —Ç–æ–∫–µ–Ω—ã, —é–∑–µ—Ä–Ω–µ–π–º—ã)
[ ] –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã/–∏–º–µ–Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

6) –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
- –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π
- –¢–∞–π–º–µ—Ä—ã –ø–∞—É–∑ —Ç–æ—á–Ω—ã–µ (¬±5 —Å–µ–∫), –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å FloodWait —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è, —Å–±—Ä–æ—Å –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞
- –ú–Ω–æ–≥–æ–∞–∫–∫–∞—É–Ω—Ç–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–æ—Ç–∞–º–∏ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è (commit/rollback –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω)
- UI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è, –ª–æ–≥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã –∏ –±–µ–∑ PII

–í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 2‚Äì3 —á–∞—Å–∞
–ò—Ç–æ–≥:  ‚úÖ –ü–†–û–ô–î–ï–ù–û / ‚ùå –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞: ______________________________
